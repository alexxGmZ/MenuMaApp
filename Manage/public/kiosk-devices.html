<!--
	This is for Kiosk Devices
	This is where the establishment register and connects android devices that will serve
		as an order kiosk

	Intended functions or features:
		* Generate unique API connection token for each authorized Android devices with
			Order application
		* List all authorized android connections
		* Establish a secured connection throuh API connection tokens to an authorized
			Android device with an Order application installed
		* Search and List all LAN IP Addresses

	NOTE: The intended functions or features might change depending on the status of the
	project
-->

<!DOCTYPE html>
<html lang="en">

<head>
	<title>Kiosk Devices</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="./styles/styles.css" rel="stylesheet">
</head>

<body>
	<a href="./main.html">Order Queue</a>
	<br>
	<button onclick="refresh_registered_devices_table()">Refresh Table</button>
	<br><br>

	<h1 class="font-bold">Register a Device</h1>
	<label for="device_ip">IP Address:</label>
	<input type="text" id="device_ip" value="">

	<br>

	<label for="device_name">Device Name:</label>
	<input type="text" id="device_name" value="">

	<br>

	<label for="device_mac_address">MAC Address:</label>
	<input type="text" id="device_mac_address" value="">

	<br>

	<button onclick="register_device()">Register</button>

	<br><br>

	<!-- device register success dialog -->
	<dialog id="device_register_success_dialog" class="rounded-lg">
		<h1 class="font-bold">Device successfully registered</h1>
		<br>

		<label for="success_device_ip">IP Address:</label>
		<span id="success_device_ip" class="font-bold"></span>
		<br>

		<label for="success_device_name">Device Name:</label>
		<span id="success_device_name" class="font-bold"></span>
		<br>

		<label for="success_device_mac">MAC Address:</label>
		<span id="success_device_mac" class="font-bold"></span>
		<br>

		<label for="success_device_api_token">Token:</label>
		<span id="success_device_api_token" class="font-bold"></span>
		<br>

		<center>
			<button onclick="refresh_registered_devices_table()">OK</button>
		</center>
	</dialog>

	<!-- ipv4 address already exist dialog -->
	<dialog id="ipv4_already_exist_dialog" class="rounded-lg">
		<p>
			<span id="existing_ip" class="font-bold"></span>
			already exist
		</p>
		<center>
			<button onclick="dialog_close('ipv4_already_exist_dialog')">OK</button>
		</center>
	</dialog>

	<!-- mac address already exist dialog -->
	<dialog id="mac_address_already_exist_dialog" class="rounded-lg">
		<p>
			<span id="existing_mac_address" class="font-bold"></span>
			already exist
		</p>
		<center>
			<button onclick="dialog_close('mac_address_already_exist_dialog')">OK</button>
		</center>
	</dialog>

	<!-- invalid ipv4 dialog -->
	<dialog id="invalid_ipv4_dialog" class="rounded-lg">
		<p>
			<span id="invalid_ip" class="font-bold"></span>
			is invalid IPV4 address
		</p>
		<center>
			<button onclick="dialog_close('invalid_ipv4_dialog')">OK</button>
		</center>
	</dialog>

	<!-- invalid ipv4 dialog -->
	<dialog id="invalid_mac_address_dialog" class="rounded-lg">
		<p>
			<span id="invalid_mac_address" class="font-bold"></span>
			is invalid MAC address
		</p>
		<center>
			<button onclick="dialog_close('invalid_mac_address_dialog')">OK</button>
		</center>
	</dialog>

	<!-- list all registered android devices -->
	<h1 class="font-bold">Registered Devices</h1>
	<table id="registered_devices_table">
		<thead>
			<tr>
				<th data-column="ip_address">Local IP Address</th>
				<th data-column="device_name">Device Name</th>
				<th data-column="api_token">API Token</th>
				<th data-column="mac_address">MAC Address</th>
				<th data-column="timestamp_column">Timestamp</th>
				<th>Actions</th>
			</tr>
		</thead>

		<tbody id="registered_devices">
			<!-- call list_registered_devices() function -->
		</tbody>
	</table>

	<br><br>

	<!-- list all available devices in the LAN -->
	<h1 class="font-bold">Available Devices</h1>
	<button onclick="list_available_devices()">Scan Network for Devices</button>
	<br><br>

	<table>
		<thead>
			<tr>
				<th>Device Name</th>
				<th>Local IP Address</th>
			</tr>
		</thead>

		<tbody id="local_devices">
			<!-- call list_available_devices() function -->
		</tbody>
	</table>

	<br><br>

	<!-- update device details dialog -->
	<dialog id="update_device_dialog" class="rounded-lg">
		<h1 class="font-bold">Update Device</h1>

		<label for="update_device_ip">Device IP: </label>
		<span id="update_device_ip"></span>
		<br>

		<label for="">Device Name: </label>
		<input type="text" id="update_device_name">
		<br>

		<label for="update_device_api_token">API Token: </label>
		<span id="update_device_api_token"></span>
		<br>

		<button id="update_device_gen_token_button">Generate New Token</button>
		<br>

		<label for="update_device_mac_address">MAC Address: </label>
		<input type="text" id="update_device_mac_address">
		<br>

		<center>
			<button onclick="dialog_close('update_device_dialog')">Cancel</button>
			<br>
			<button onclick="update_device()">Yes</button>
		</center>
	</dialog>

	<!-- update device success dialog -->
	<dialog id="update_device_success_dialog" class="rounded-lg">
		<span id="update_device_success_ip" class="font-bold"></span>
		<p>is successfully updated</p>
		<br>
		<center>
			<button onclick="refresh_registered_devices_table()">Ok</button>
		</center>
	</dialog>

	<!-- delete device dialog -->
	<dialog id="delete_device_dialog" class="rounded-lg">
		<h1 class="font-bold">Delete Device?</h1>

		<label for="delete_device_ip">Device IP: </label>
		<span id="delete_device_ip"></span>
		<br>

		<label for="delete_device_name">Device Name: </label>
		<span id="delete_device_name"></span>
		<br>

		<label for="delete_device_api_token">API Token: </label>
		<span id="delete_device_api_token"></span>
		<br>

		<label for="delete_device_mac_address">MAC Address: </label>
		<span id="delete_device_mac_address"></span>
		<br>

		<center>
			<button onclick="dialog_close('delete_device_dialog')">Cancel</button>
			<br>
			<button onclick="delete_device()">Yes</button>
		</center>
	</dialog>

	<!-- delete device success dialog -->
	<dialog id="delete_device_success_dialog" class="rounded-lg">
		<span id="delete_device_success_ip" class="font-bold"></span>
		<p>is successfully deleted</p>
		<br>
		<center>
			<button onclick="refresh_registered_devices_table()">Ok</button>
		</center>
	</dialog>

	<script src="./js/kiosk-devices.js"></script>
</body>

</html>
